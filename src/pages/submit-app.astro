---
import AppLayout from '../layouts/AppLayout.astro';
import { AppSubmissionForm } from '../components/app/AppSubmissionForm.tsx';

const currentUser = Astro.locals.user;

// Redirect to login if not authenticated
if (!currentUser) {
  return Astro.redirect('/login?redirect=/submit-app');
}
---

<AppLayout
  title="Submit an APP"
  description="Share your vibe-coded app with the VibeCoding community"
>
  <div class="mx-auto max-w-3xl">
    <article class="rounded border border-[#a2a9b1] bg-white p-6 shadow-sm">
      <h2 class="mb-4 text-2xl font-semibold text-[#202122]">Submit Your APP</h2>
      <p class="mb-6 text-sm text-[#54595d]">
        Share your vibe-coded application with the community. All submissions are reviewed before being published.
      </p>

      <AppSubmissionForm client:load />
    </article>
  </div>
</AppLayout>
